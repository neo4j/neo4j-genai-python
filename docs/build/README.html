<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Neo4j GenAI package for Python &#8212; neo4j-genai-python  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/css/neo4j.css?v=f6087c41" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="https://neo4j.com/wp-content/themes/neo4jweb/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<link href="_static/css/nunito-sans.css" rel="stylesheet">

  </head><body>
<body class="article docs sphinx">

<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/source/themes/themes/neo4j/static">
        <img class="navbar-logo" src="https://dist.neo4j.com/wp-content/uploads/20210422142941/neo4j-logo-2020.svg" alt="Neo4j Logo">
      </a>
      <a href="index.html" class="navbar-item no-left-padding" aria-label="">
          
      </a>
    </div>
  </nav>
</header>


<div class="body">
  
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="nav-container">
    <aside class="nav">
      <div class="panels">
        <div class="nav-panel-menu is-active" data-panel="menu">
            <nav class="nav-menu">
                <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a></li>
</ul>

            </nav>
        </div>
      </div>
    </aside>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><div id="indexlinkbox">
    <h3 id="indexlinklabel">Index</h3>

    <div class="indexlinkwrapper nav-menu">
        <ul>
            <li class="toctree-l1">
                <a href="genindex.html" class="indexlink genindex">
                    Index
                </a>
            </li>
        </ul>
    </div>
</div>
        </div>
      </div>
  <main class="article">
    <div class="toolbar" role="navigation">
      <div class="toolbar-wrapper">
        <button class="nav-toggle" aria-label="Toggle Table of Contents"></button>
      </div>
    </div>
    <div class="content">
      <article class="doc">
        
  <section id="neo4j-genai-package-for-python">
<h1>Neo4j GenAI package for Python<a class="headerlink" href="#neo4j-genai-package-for-python" title="Link to this heading">¶</a></h1>
<p>This repository contains the official Neo4j GenAI features for Python.</p>
<p>The purpose of this package is to provide a first party package to developers,
where Neo4j can guarantee long term commitment and maintenance as well as being
fast to ship new features and high performing patterns and methods.</p>
<p>Docs are coming soon!</p>
</section>
<section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h1>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h2>
<p>This package requires Python (&gt;=3.8.1).</p>
<p>To install the latest stable version, use:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>neo4j-genai
</pre></div>
</div>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h2>
<p>While the library has more retrievers than shown here, the following examples should be able to get you started.</p>
<section id="performing-a-similarity-search">
<h3>Performing a similarity search<a class="headerlink" href="#performing-a-similarity-search" title="Link to this heading">¶</a></h3>
<p>Assumption: Neo4j running with populated vector index in place.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">neo4j</span> <span class="kn">import</span> <span class="n">GraphDatabase</span>
<span class="kn">from</span> <span class="nn">neo4j_genai</span> <span class="kn">import</span> <span class="n">VectorRetriever</span>

<span class="n">URI</span> <span class="o">=</span> <span class="s2">&quot;neo4j://localhost:7687&quot;</span>
<span class="n">AUTH</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;neo4j&quot;</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">)</span>

<span class="n">INDEX_NAME</span> <span class="o">=</span> <span class="s2">&quot;embedding-name&quot;</span>

<span class="c1"># Connect to Neo4j database</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">GraphDatabase</span><span class="o">.</span><span class="n">driver</span><span class="p">(</span><span class="n">URI</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">AUTH</span><span class="p">)</span>

<span class="c1"># Initialize the retriever</span>
<span class="n">retriever</span> <span class="o">=</span> <span class="n">VectorRetriever</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">INDEX_NAME</span><span class="p">)</span>

<span class="c1"># Run the similarity search</span>
<span class="n">query_text</span> <span class="o">=</span> <span class="s2">&quot;How do I do similarity search in Neo4j?&quot;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">retriever</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">query_text</span><span class="o">=</span><span class="n">query_text</span><span class="p">,</span> <span class="n">top_k</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="creating-a-vector-index">
<h3>Creating a vector index<a class="headerlink" href="#creating-a-vector-index" title="Link to this heading">¶</a></h3>
<p>When creating a vector index, make sure you match the number of dimensions in the index with the number of dimensions the embeddings have.</p>
<p>Assumption: Neo4j running</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">neo4j</span> <span class="kn">import</span> <span class="n">GraphDatabase</span>
<span class="kn">from</span> <span class="nn">neo4j_genai.indexes</span> <span class="kn">import</span> <span class="n">create_vector_index</span>

<span class="n">URI</span> <span class="o">=</span> <span class="s2">&quot;neo4j://localhost:7687&quot;</span>
<span class="n">AUTH</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;neo4j&quot;</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">)</span>

<span class="n">INDEX_NAME</span> <span class="o">=</span> <span class="s2">&quot;chunk-index&quot;</span>

<span class="c1"># Connect to Neo4j database</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">GraphDatabase</span><span class="o">.</span><span class="n">driver</span><span class="p">(</span><span class="n">URI</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">AUTH</span><span class="p">)</span>

<span class="c1"># Creating the index</span>
<span class="n">create_vector_index</span><span class="p">(</span>
    <span class="n">driver</span><span class="p">,</span>
    <span class="n">INDEX_NAME</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Document&quot;</span><span class="p">,</span>
    <span class="nb">property</span><span class="o">=</span><span class="s2">&quot;textProperty&quot;</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="mi">1536</span><span class="p">,</span>
    <span class="n">similarity_fn</span><span class="o">=</span><span class="s2">&quot;euclidean&quot;</span><span class="p">,</span>
<span class="p">)</span>

</pre></div>
</div>
</section>
<section id="populating-the-neo4j-vector-index">
<h3>Populating the Neo4j Vector Index<a class="headerlink" href="#populating-the-neo4j-vector-index" title="Link to this heading">¶</a></h3>
<p>This library does not write to the database, that is up to you.
See below for how to write using Cypher via the Neo4j driver.</p>
<p>Assumption: Neo4j running with a defined vector index</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">neo4j</span> <span class="kn">import</span> <span class="n">GraphDatabase</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>

<span class="n">URI</span> <span class="o">=</span> <span class="s2">&quot;neo4j://localhost:7687&quot;</span>
<span class="n">AUTH</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;neo4j&quot;</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">)</span>

<span class="c1"># Connect to Neo4j database</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">GraphDatabase</span><span class="o">.</span><span class="n">driver</span><span class="p">(</span><span class="n">URI</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">AUTH</span><span class="p">)</span>

<span class="c1"># Upsert the vector</span>
<span class="n">vector</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">DIMENSION</span><span class="p">)]</span>
<span class="n">insert_query</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;MERGE (n:Document {id: $id})&quot;</span>
    <span class="s2">&quot;WITH n &quot;</span>
    <span class="s2">&quot;CALL db.create.setNodeVectorProperty(n, &#39;textProperty&#39;, $vector)&quot;</span>
    <span class="s2">&quot;RETURN n&quot;</span>
<span class="p">)</span>
<span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;vector&quot;</span><span class="p">:</span> <span class="n">vector</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">driver</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span><span class="n">insert_query</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="development">
<h1>Development<a class="headerlink" href="#development" title="Link to this heading">¶</a></h1>
<section id="install-dependencies">
<h2>Install dependencies<a class="headerlink" href="#install-dependencies" title="Link to this heading">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>install
</pre></div>
</div>
</section>
<section id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Link to this heading">¶</a></h2>
<section id="issues">
<h3>Issues<a class="headerlink" href="#issues" title="Link to this heading">¶</a></h3>
<p>If you have a bug to report or feature to request, first
<a class="reference external" href="https://docs.github.com/en/github/searching-for-information-on-github/searching-on-github/searching-issues-and-pull-requests#search-by-the-title-body-or-comments">search to see if an issue already exists</a>.
If a related issue doesn’t exist, please raise a new issue using the relevant
<a class="reference external" href="https://github.com/neo4j/neo4j-genai-python/issues/new/choose">issue form</a>.</p>
<p>If you’re a Neo4j Enterprise customer, you can also reach out to <a class="reference external" href="http://support.neo4j.com/">Customer Support</a>.</p>
<p>If you don’t have a bug to report or feature request, but you need a hand with
the library; community support is available via <a class="reference external" href="https://community.neo4j.com/">Neo4j Online Community</a>
and/or <a class="reference external" href="https://discord.gg/neo4j">Discord</a>.</p>
</section>
<section id="make-changes">
<h3>Make changes<a class="headerlink" href="#make-changes" title="Link to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Fork the repository.</p></li>
<li><p>Install Python and Poetry. For more information, see <a class="reference internal" href="#./docs/contributing/DEVELOPING.md"><span class="xref myst">the development guide</span></a>.</p></li>
<li><p>Create a working branch from <code class="docutils literal notranslate"><span class="pre">main</span></code> and start with your changes!</p></li>
</ol>
</section>
<section id="pull-request">
<h3>Pull request<a class="headerlink" href="#pull-request" title="Link to this heading">¶</a></h3>
<p>When you’re finished with your changes, create a pull request, also known as a PR.</p>
<ul class="simple">
<li><p>Ensure that you have <a class="reference external" href="https://neo4j.com/developer/contributing-code/#sign-cla">signed the CLA</a>.</p></li>
<li><p>Ensure that the base of your PR is set to <code class="docutils literal notranslate"><span class="pre">main</span></code>.</p></li>
<li><p>Don’t forget to <a class="reference external" href="https://docs.github.com/en/issues/tracking-your-work-with-issues/linking-a-pull-request-to-an-issue">link your PR to an issue</a>
if you are solving one.</p></li>
<li><p>Enable the checkbox to <a class="reference external" href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/allowing-changes-to-a-pull-request-branch-created-from-a-fork">allow maintainer edits</a>
so that maintainers can make any necessary tweaks and update your branch for merge.</p></li>
<li><p>Reviewers may ask for changes to be made before a PR can be merged, either using
<a class="reference external" href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/incorporating-feedback-in-your-pull-request">suggested changes</a>
or normal pull request comments. You can apply suggested changes directly through
the UI, and any other changes can be made in your fork and committed to the PR branch.</p></li>
<li><p>As you update your PR and apply changes, mark each conversation as <a class="reference external" href="https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/commenting-on-a-pull-request#resolving-conversations">resolved</a>.</p></li>
</ul>
</section>
</section>
<section id="run-tests">
<h2>Run tests<a class="headerlink" href="#run-tests" title="Link to this heading">¶</a></h2>
<p>Open a new virtual environment and then run the tests.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>shell
pytest
</pre></div>
</div>
</section>
<section id="further-information">
<h2>Further information<a class="headerlink" href="#further-information" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/neo4j/neo4j-python-driver">The official Neo4j Python driver</a></p></li>
<li><p><a class="reference external" href="https://neo4j.com/docs/cypher-manual/current/genai-integrations/">Neo4j GenAI integrations</a></p></li>
</ul>
</section>
</section>


        <!--
        <a href="_sources/README.md.txt"
        rel="nofollow">Page source</a> -->
      </article>
    </div>

  </main>
</div>
  <footer class="footer">
    <div class="wrapper">
    <div class="column">
      <div class="logo-footer"></div>
      <p>© <span id="footer-copyright-year"></span> Neo4j, Inc.<br>
        <a href="https://neo4j.com/terms/">Terms</a> | <a href="https://neo4j.com/privacy-policy/">Privacy </a> | <a href="https://neo4j.com/sitemap/">Sitemap</a></p>
      <p>Neo4j<sup>®</sup>, Neo Technology<sup>®</sup>, Cypher<sup>®</sup>, Neo4j<sup>®</sup> Bloom<sup>™</sup> and
        Neo4j<sup>®</sup> Aura<sup>™</sup> are registered trademarks
        of Neo4j, Inc. All other marks are owned by their respective companies.</p>
    </div>

    <div class="column">
      <h2><a href="https://neo4j.com/contact-us/?ref=footer">Contact Us →</a></h2>
      <p>US: 1-855-636-4532<br>
        Sweden +46 171 480 113<br>
        UK: +44 20 3868 3223<br>
        France: +33 (0) 1 88 46 13 20<br>
        <!--Germany: +49 (0)89 26204 6300</p>-->
      </p>
    </div>
    <div class="column links">
      <h2>Learn</h2>
      <ul>
        <li><i class="fa fa-wrench" aria-hidden="true"></i> <a rel="noopener" href="https://neo4j.com/sandbox/?ref=developer-footer">Sandbox</a></li>
        <li><i class="fa fa-comments-o" aria-hidden="true"></i> <a rel="noopener" href="https://community.neo4j.com?ref=developer-footer" target="_blank">Neo4j Community Site</a></li>
        <li><i class="fa fa-book" aria-hidden="true"></i> <a rel="noopener" href="https://medium.com/neo4j" target="_blank">Neo4j Developer Blog</a></li>
        <li><i class="fa fa-youtube" aria-hidden="true"></i> <a rel="noopener" href="https://www.youtube.com/neo4j" target="_blank">Neo4j Videos</a></li>
        <li><i class="fa fa-graduation-cap" aria-hidden="true"></i> <a rel="noopener" href="https://neo4j.com/graphacademy/?ref=developer-footer">GraphAcademy</a></li>
        <li><i class="fa fa-flask" aria-hidden="true"></i> <a href="https://neo4j.com/labs/?ref=developer-footer">Neo4j Labs</a></li>
      </ul>
    </div>
    <div class="column links">
      <h2>Social</h2>
      <ul>
        <li><i class="fa fa-twitter" aria-hidden="true"></i> <a rel="noopener" href="https://twitter.com/neo4j" target="_blank">Twitter</a></li>
        <li><i class="fa fa-meetup" aria-hidden="true"></i> <a rel="noopener" href="https://www.meetup.com/Neo4j-Online-Meetup/" target="_blank">Meetups</a></li>
        <li><i class="fa fa-github" aria-hidden="true"></i> <a rel="noopener" href="https://github.com/neo4j/neo4j" target="_blank">Github</a></li>
        <li><i class="fa fa-stack-overflow" aria-hidden="true"></i> <a rel="noopener" href="https://stackoverflow.com/questions/tagged/neo4j" target="_blank">Stack Overflow</a></li>
        <li class="speaker-program"><a href="https://docs.google.com/forms/d/e/1FAIpQLSdEcNnMruES5iwvOVYovmS1D_P1ZL_HdUOitFrwrvruv5PZvA/viewform">Want to Speak?</a></li>
      </ul>
    </div>
  </div>
</footer>
  
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-WK23PSS');</script>
  
  </body>
</html>